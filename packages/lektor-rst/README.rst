This project is fork of the `lektor-rst plugin`_ by `Florian Schulze`_.
The author information and project metadata have been changed
due to major changes to the original.

The differences between this fork and the original are:

- It allows setting docutils parameters through plugin configuration.
  (This change is submitted as a
  `PR <https://github.com/fschulze/lektor-rst/pull/7>`_ to the original repo.)

- It fixes the `issue <https://github.com/fschulze/lektor-rst/issues/3>`_
  where a title underline that consists of dashes and is exactly
  as long as the title text will cause a short underline error in docutils.
  (This change is submitted as a
  `PR <https://github.com/fschulze/lektor-rst/pull/8>`_ to the original repo.)

- It can do the following cleaning operations on the docutils generated markup:

  - removing ``docutils`` classes from elements
  - removing ``container`` classes generated by container directives
  - removing ``colgroup`` elements and the ``col`` elements they contain
  - removing ``head`` classes from ``th`` elements
  - converting ``<div class="section">`` to ``<section class="section">``

- It can normalize and pretty-print the docutils generated markup
  using `HTML Tidy <http://www.html-tidy.org/>`_. This options requires
  ``libtidy`` to be installed.

These options can be set using the plugin configuration file
``configs/rst.ini`` in the Lektor project. A sample configuration
is given below  (the default values for the options that are defined
by this plugin are indicated)::

  [docutils]
  ## see http://docutils.sourceforge.net/docs/user/config.html for a list of all settings 
  writer = html5
  cloak_email_addresses = yes

  [clean]
  remove_docutils_class = yes                   # default: yes
  remove_docutils_container_class = yes         # default: yes
  remove_colgroup = yes                         # default: yes
  remove_th_head_class = yes                    # default: yes
  div_to_section = yes                          # default: yes

  [tidy]
  enabled = yes                                 # default: no

  ## see http://api.html-tidy.org/ for a list of all settings
  output-xhtml = yes
  indent-spaces = 2

  ## this option is specific to this plugin
  remove_space_before_self_closing_slash = yes  # default: no

.. _lektor-rst plugin: https://github.com/fschulze/lektor-rst
.. _Florian Schulze: https://github.com/fschulze
